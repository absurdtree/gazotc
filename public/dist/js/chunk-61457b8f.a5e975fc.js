(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61457b8f"],{"005d":function(e,t,a){},"3b88":function(e,t,a){"use strict";a("005d")},ea42:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chongzhi"},[a("van-nav-bar",{attrs:{title:"充值中心","right-text":"","left-arrow":"",fixed:!0,placeholder:!0,"z-index":"99"},on:{"click-left":e.goback}}),a("div",{staticClass:"czhiview"},[a("div",{staticClass:"czhiview_form"},[a("div",{staticClass:"czhiview_form_hblist"},[a("div",{staticClass:"czhiview_form_hblist_t"},[e._v("Select currency")]),a("div",{staticClass:"czhiview_form_hblist_ul"},e._l(e.hbilist,(function(t,i){return a("div",{key:i,staticClass:"czhiview_form_hblist_item",class:e.hbindex==i?"ac":"",on:{click:function(t){e.hbindex=i}}},[e._v(e._s(t.title))])})),0)]),a("div",{staticClass:"czhiview_form_shurk"},[a("div",{staticClass:"czhiview_form_shurk_t"},[e._v("Recharge amount")]),a("div",{staticClass:"czhiview_form_shurk_input"},[a("div",{staticClass:"czhiview_form_shurk_input_l"},[e._v(e._s(e.hbilist[e.hbindex].title))]),a("el-input",{attrs:{placeholder:e.$t("message.enterContent")},model:{value:e.je,callback:function(t){e.je=t},expression:"je"}})],1)]),a("div",{staticClass:"czhiview_form_czhi"},[a("van-button",{attrs:{type:"primary",block:""},on:{click:e.chongzhi}},[e._v("Recharge")])],1)])])],1)},n=[],r=(a("c975"),a("a15b"),a("a434"),a("a9e3"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("96cf"),a("1da1")),s=a("d399"),c=a("f564"),o=a("2241"),u=a("6314"),l=a.n(u),h=a("5aac"),b=a.n(h),f=a("db49"),d=f["a"]["hbi"][f["a"]["key"]],m=[],p=1;for(var v in d)p++,m.push({id:p,key:d[v]["heyue"],abi:d[v]["abi"],title:d[v]["id"],num:d[v]["num"]});var g="",w="",x={data:function(){return{hbilist:m,hbindex:0,je:0,key:f["a"]["key"]}},mounted:function(){if(s["a"].setDefaultOptions("loading",{forbidClick:!1,closeOnClickOverlay:!1,duration:0,overlay:!0}),this.$route.query.title)for(var e=0;e<this.hbilist.length;e++)if(this.hbilist[e]["title"]==this.$route.query.title){this.hbindex=e;break}function t(){return a.apply(this,arguments)}function a(){return a=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},a=new b.a({providerOptions:t}),e.next=4,a.connect();case 4:return i=e.sent,w=new l.a(i),e.next=9,w.eth.getAccounts();case 9:e.sent,w&&i&&(g=i.selectedAddress);case 12:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}"undefined"===typeof ethereum?alert("Please install the metamask plug-in first"):t()},methods:{goback:function(){this.$router.go(-1)},getFNum:function(e){if(e=e.toString(),-1!=e.indexOf("+")&&(e=e.replace("+","")),-1!=e.indexOf("E")||-1!=e.indexOf("e")){var t="",a="",i=null,n=0,r=[],s="",c=e.toString();if("-"==c[0]&&(c=c.substr(1),s="-"),-1!=c.indexOf("E")||-1!=c.indexOf("e")){var o=new RegExp("^(((\\d+.?\\d+)|(\\d+))[Ee]{1}((-(\\d+))|(\\d+)))$","ig");if(i=o.exec(c),null!=i&&(t=i[2],a=i[5],i=null),!t&&!a)return!1;if(n=-1==t.indexOf(".")?0:t.indexOf("."),t=t.replace(".",""),r=t.split(""),Number(a)>=0){var u=t.substr(n),l=0==n?0:u.length;a=Number(a);for(var h=0;h<a-l;h++)r.push("0");a-u.length<0&&r.splice(n+a,0,".")}else{a=a.replace("-",""),a=Number(a);for(var b=0;b<a-n;b++)r.unshift("0");var f=a-n>=0?1:-(a-n);r.splice(f,0,".")}}return t=r.join(""),s+t}return e},hbczhi:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,n,r,u,l,h,b,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(m=function(){var e=i.getFNum(Number(i.je)*Math.pow(10,6)),t=f["a"]["hbi"][f["a"]["key"]]["Test"]["heyue"];r.methods.deposit(t,e).send({from:g},(function(e,t){t?d():(s["a"].clear(),Object(c["a"])({type:"warning",message:"请点击同意！"}))}))},d=function(){r.methods.balancepro(g,f["a"]["hbi"][f["a"]["key"]]["Test"]["heyue"]).call((function(e,t){if(t){var n=Number(i.je)*Math.pow(10,6)+Number(a);Number(t)>=n?(s["a"].clear(),o["a"].alert({title:"充值成功",message:"您好，您已成功充值"+i.je+" "+i.hbilist[i.hbindex]["title"]}).then((function(){}))):setTimeout((function(){d()}),3e3)}}))},b=function(e){n.methods.allowance(g,f["a"]["hyue"][f["a"]["key"]]["dotc"]["heyue"]).call((function(t,a){a&&(Number(a)>=e?m():setTimeout((function(){b(e)}),3e3))}))},s["a"].loading({message:"等待中..."}),a=0,i=e,n=new w.eth.Contract(f["a"]["hbi"][f["a"]["key"]]["Test"]["abi"],f["a"]["hbi"][f["a"]["key"]]["Test"]["heyue"]),r=new w.eth.Contract(f["a"]["hyue"][f["a"]["key"]]["dotc"]["abi"],f["a"]["hyue"][f["a"]["key"]]["dotc"]["heyue"]),"WHT"!=e.hbilist[e.hbindex]["title"]){t.next=15;break}return s["a"].clear(),Object(c["a"])({type:"warning",message:"Wht暂时不支持充值！"}),t.abrupt("return");case 15:if("Test"!=e.hbilist[e.hbindex]["title"]){t.next=40;break}return t.next=18,n.methods.balanceOf(g).call();case 18:if(u=t.sent,!(Number(u)<e.getFNum(Number(e.je)*Math.pow(10,6)))){t.next=23;break}return s["a"].clear(),Object(c["a"])({type:"warning",message:"资产余额不足！"}),t.abrupt("return");case 23:return t.next=25,r.methods.balancepro(g,f["a"]["hbi"][f["a"]["key"]]["Test"]["heyue"]).call();case 25:return a=t.sent,t.next=28,n.methods.allowance(g,f["a"]["hyue"][f["a"]["key"]]["dotc"]["heyue"]).call();case 28:if(l=t.sent,!(Number(l)>=Number(e.je)*Math.pow(10,6))){t.next=33;break}m(),t.next=40;break;case 33:return h=e.getFNum(Number(e.je)*Math.pow(10,6)*100),t.next=37,w.eth.getAccounts();case 37:t.sent,n.methods.approve(f["a"]["hyue"][f["a"]["key"]]["dotc"]["heyue"],h).send({from:g},(function(e,t){t?b(h):(s["a"].clear(),Object(c["a"])({type:"warning",message:"请点击同意！"}))}));case 40:case"end":return t.stop()}}),t)})))()},chongzhi:function(){if(this.je<=0)Object(c["a"])({type:"warning",message:"金额不能小于1"});else if("huobi"==this.key&&"WHT"==this.hbilist[this.hbindex]["title"]||"Test"==this.hbilist[this.hbindex]["title"]||"WETH"==this.hbilist[this.hbindex]["title"])this.hbczhi();else{s["a"].loading({message:"等待中。。。"});var e=new w.eth.Contract(f["a"]["hbi"][f["a"]["key"]]["USDT"]["abi"],f["a"]["hbi"][f["a"]["key"]]["USDT"]["heyue"]),t="huobi"==this.key?"":new w.eth.Contract(f["a"]["hbi"][f["a"]["key"]]["WETH"]["abi"],f["a"]["hbi"][f["a"]["key"]]["WETH"]["heyue"]),a=new w.eth.Contract(f["a"]["hyue"][f["a"]["key"]]["dotc"]["abi"],f["a"]["hyue"][f["a"]["key"]]["dotc"]["heyue"]),i=this,n="",r=0;"USDT"==this.hbilist[this.hbindex]["title"]?a.methods.balancepro(g+"","0xa71EdC38d189767582C38A3145b5873052c3e47a").call((function(t,a){a&&(r=Number(a)/Math.pow(10,18),e.methods.balanceOf(g+"").call((function(e,t){if(t){var a=Number(t)/Math.pow(10,18);if(a<Number(i.je))return s["a"].clear(),void o["a"].alert({title:i.$t("message.prompt"),message:"usdt余额不足！"}).then((function(){}));m()}})))})):"WETH"==this.hbilist[this.hbindex]["title"]&&a.methods.balancepro(g+"","0x23D58bd73136888ffAa3fDE672FC41870E928AA3").call((function(e,a){a&&(r=Number(a)/Math.pow(10,18),t.methods.balanceOf(g+"").call((function(e,t){if(t){var a=Number(t)/Math.pow(10,18);if(a<Number(i.je))return s["a"].clear(),void o["a"].alert({title:i.$("message.prompt"),message:"usdt余额不足！"}).then((function(){}));h()}})))}))}function u(){s["a"].loading({message:"提交中..."});var e="USDT"==i.hbilist[i.hbindex]["title"]?"0xa71EdC38d189767582C38A3145b5873052c3e47a":"0xf537270EdB6B5792c20D204bdc9Eb9735c6A790F",t=(i.hbilist[i.hbindex]["title"],18),n=i.getFNum(Number(i.je)*Math.pow(10,t));a.methods.deposit(e,n+"").send({from:g},(function(e,t){t&&l()}))}function l(){var e=(i.hbilist[i.hbindex]["title"],18),t="USDT"==i.hbilist[i.hbindex]["title"]?"0xa71EdC38d189767582C38A3145b5873052c3e47a":"0xf537270EdB6B5792c20D204bdc9Eb9735c6A790F";a.methods.balancepro(g+"",t).call((function(t,a){if(a){var c=Number(a)/Math.pow(10,e);c>=r+Number(i.je)?(s["a"].clear(),clearTimeout(n),o["a"].alert({title:"充值成功",message:"您好，您已成功充值"+i.je+" "+i.hbilist[i.hbindex]["title"]}).then((function(){}))):n=setTimeout((function(){l()}),3e3)}}))}function h(){t.methods.allowance(g+"","0xc25eFa9c0052856e4e4B713a180649b8c088a913").call((function(e,t){if(t){s["a"].clear();var a=Number(t)/Math.pow(10,18);a>=Number(i.je)?u():b()}}))}function b(){s["a"].loading({message:"余额授权。。。。"});var e=i.getFNum(100*Number(i.je)*Math.pow(10,18));t.methods.approve("0xc25eFa9c0052856e4e4B713a180649b8c088a913",e+"").send({from:g},(function(e,t){t&&d()}))}function d(){t.methods.allowance(g+"","0xc25eFa9c0052856e4e4B713a180649b8c088a913").call((function(e,t){if(t){var a=Number(t)/Math.pow(10,18);a>=Number(i.je)?(s["a"].clear(),clearTimeout(n),u()):n=setTimeout((function(){d()}),3e3)}}))}function m(){e.methods.allowance(g+"","0x23D58bd73136888ffAa3fDE672FC41870E928AA3").call((function(e,t){if(t){s["a"].clear();var a=Number(t)/Math.pow(10,18);0==a?v():a>=Number(i.je)?u():p()}}))}function p(){s["a"].loading({message:"Usdt授权余额不足，正在清除，请稍候"}),e.methods.approve("0x23D58bd73136888ffAa3fDE672FC41870E928AA3","0").send({from:g},(function(e,t){t&&x(1)}))}function v(){s["a"].loading({message:"Usdt余额重新授权正在进行中。。。。"}),e.methods.approve("0x23D58bd73136888ffAa3fDE672FC41870E928AA3",i.getFNum(100*Number(i.je)*Math.pow(10,18))+"").send({from:g},(function(e,t){t&&x(2)}))}function x(t){e.methods.allowance(g+"","0x23D58bd73136888ffAa3fDE672FC41870E928AA3").call((function(e,a){if(a){var r=Number(a)/Math.pow(10,18);1==t?0==r?(s["a"].clear(),clearTimeout(n),v()):n=setTimeout((function(){x(t)}),3e3):r>=Number(i.je)?(s["a"].clear(),clearTimeout(n),u()):n=setTimeout((function(){x(t)}),3e3)}}))}}}},y=x,k=(a("3b88"),a("2877")),N=Object(k["a"])(y,i,n,!1,null,"1cf97e39",null);t["default"]=N.exports}}]);